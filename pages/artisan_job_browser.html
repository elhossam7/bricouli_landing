<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Browse Jobs - Bricouli</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fbricoulil1075back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.5"></script>
</head>
<body class="bg-background min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-craft sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="artisan_dashboard.html" class="flex items-center">
                        <svg class="h-8 w-8 text-primary" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8 4L24 4C26.2091 4 28 5.79086 28 8V24C28 26.2091 26.2091 28 24 28H8C5.79086 28 4 26.2091 4 24V8C4 5.79086 5.79086 4 8 4Z" fill="currentColor"/>
                            <path d="M12 12H20V14H12V12Z" fill="white"/>
                            <path d="M12 16H20V18H12V16Z" fill="white"/>
                            <path d="M12 20H16V22H12V20Z" fill="white"/>
                        </svg>
                        <span class="ml-2 text-xl font-bold text-gray-900">Bricouli</span>
                    </a>
                </div>
                
                <!-- Search Bar - Desktop -->
                <div class="hidden md:flex flex-1 max-w-lg mx-8">
                    <div class="relative w-full">
                        <input type="text" id="searchInput" placeholder="Search jobs by title, description, or location..." class="w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none" />
                        <svg class="absolute left-3 top-2.5 h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                    </div>
                </div>
                
                <!-- Header Actions -->
                <div class="flex items-center space-x-4">
                    <!-- View Toggle -->
                    <div class="hidden md:flex bg-gray-100 rounded-lg p-1">
                        <button id="listViewBtn" class="view-toggle-btn active" onclick="toggleView('list')">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"/>
                            </svg>
                        </button>
                        <button id="gridViewBtn" class="view-toggle-btn" onclick="toggleView('grid')">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"/>
                            </svg>
                        </button>
                    </div>

                    <!-- Map Toggle -->
                    <button id="mapToggleBtn" class="btn-outline text-sm" onclick="toggleMap()">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/>
                        </svg>
                        Map View
                    </button>

                    <!-- Notifications -->
                    <button class="relative p-2 text-gray-600 hover:text-primary transition-colors duration-200">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5zM10.07 2.82l3.93 3.93-3.93 3.93-3.93-3.93 3.93-3.93z"/>
                        </svg>
                        <span class="absolute -top-1 -right-1 bg-accent text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">2</span>
                    </button>
                    
                    <!-- User Menu -->
                    <div class="relative">
                        <button class="flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-50 transition-colors duration-200">
                            <img src="https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=400" alt="User avatar" class="w-8 h-8 rounded-full object-cover" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            <span class="hidden md:block text-sm font-medium text-gray-700">Alex Johnson</span>
                            <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Search Bar -->
    <div class="md:hidden bg-white border-b border-gray-200 px-4 py-3">
        <div class="relative">
            <input type="text" placeholder="Search jobs..." class="w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none" />
            <svg class="absolute left-3 top-2.5 h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
            </svg>
        </div>
    </div>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 pb-20 lg:pb-6">
        <div class="flex flex-col lg:flex-row gap-6">
            <!-- Filters Sidebar -->
            <aside class="lg:w-80 flex-shrink-0">
                <div class="bg-white rounded-lg shadow-craft p-6 sticky top-24">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-lg font-semibold text-gray-900">Filters</h2>
                        <button class="text-sm text-primary hover:text-primary-700 transition-colors duration-200" onclick="clearFilters()">
                            Clear All
                        </button>
                    </div>

                    <!-- Active Filters -->
                    <div id="activeFilters" class="hidden mb-4">
                        <div class="flex flex-wrap gap-2" id="activeFiltersList">
                            <!-- Active filters will be populated here -->
                        </div>
                    </div>

                    <div class="space-y-6">
                        <!-- Category Filter -->
                        <div>
                            <h3 class="font-medium text-gray-900 mb-3">Category</h3>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" name="category" value="plumbing" class="filter-checkbox" />
                                    <span class="ml-2 text-sm text-gray-700">Plumbing</span>
                                    <span class="ml-auto text-xs text-gray-500">(12)</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="category" value="electrical" class="filter-checkbox" />
                                    <span class="ml-2 text-sm text-gray-700">Electrical</span>
                                    <span class="ml-auto text-xs text-gray-500">(8)</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="category" value="carpentry" class="filter-checkbox" />
                                    <span class="ml-2 text-sm text-gray-700">Carpentry</span>
                                    <span class="ml-auto text-xs text-gray-500">(15)</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="category" value="painting" class="filter-checkbox" />
                                    <span class="ml-2 text-sm text-gray-700">Painting</span>
                                    <span class="ml-auto text-xs text-gray-500">(7)</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="category" value="roofing" class="filter-checkbox" />
                                    <span class="ml-2 text-sm text-gray-700">Roofing</span>
                                    <span class="ml-auto text-xs text-gray-500">(4)</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="category" value="flooring" class="filter-checkbox" />
                                    <span class="ml-2 text-sm text-gray-700">Flooring</span>
                                    <span class="ml-auto text-xs text-gray-500">(6)</span>
                                </label>
                            </div>
                        </div>

                        <!-- Budget Filter -->
                        <div>
                            <h3 class="font-medium text-gray-900 mb-3">Budget Range</h3>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" name="budget" value="under-500" class="filter-checkbox" />
                                    <span class="ml-2 text-sm text-gray-700">Under $500</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="budget" value="500-2000" class="filter-checkbox" />
                                    <span class="ml-2 text-sm text-gray-700">$500 - $2,000</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="budget" value="2000-5000" class="filter-checkbox" />
                                    <span class="ml-2 text-sm text-gray-700">$2,000 - $5,000</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="budget" value="5000-plus" class="filter-checkbox" />
                                    <span class="ml-2 text-sm text-gray-700">$5,000+</span>
                                </label>
                            </div>
                        </div>

                        <!-- Distance Filter -->
                        <div>
                            <h3 class="font-medium text-gray-900 mb-3">Distance</h3>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="radio" name="distance" value="5" class="filter-radio" />
                                    <span class="ml-2 text-sm text-gray-700">Within 5 miles</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="distance" value="10" class="filter-radio" checked />
                                    <span class="ml-2 text-sm text-gray-700">Within 10 miles</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="distance" value="25" class="filter-radio" />
                                    <span class="ml-2 text-sm text-gray-700">Within 25 miles</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="distance" value="50" class="filter-radio" />
                                    <span class="ml-2 text-sm text-gray-700">Within 50 miles</span>
                                </label>
                            </div>
                        </div>

                        <!-- Timeline Filter -->
                        <div>
                            <h3 class="font-medium text-gray-900 mb-3">Timeline</h3>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" name="timeline" value="asap" class="filter-checkbox" />
                                    <span class="ml-2 text-sm text-gray-700">ASAP</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="timeline" value="this-week" class="filter-checkbox" />
                                    <span class="ml-2 text-sm text-gray-700">This Week</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="timeline" value="this-month" class="filter-checkbox" />
                                    <span class="ml-2 text-sm text-gray-700">This Month</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="timeline" value="flexible" class="filter-checkbox" />
                                    <span class="ml-2 text-sm text-gray-700">Flexible</span>
                                </label>
                            </div>
                        </div>

                        <!-- Skill Level Filter -->
                        <div>
                            <h3 class="font-medium text-gray-900 mb-3">Skill Level</h3>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" name="skillLevel" value="beginner" class="filter-checkbox" />
                                    <span class="ml-2 text-sm text-gray-700">Beginner</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="skillLevel" value="intermediate" class="filter-checkbox" />
                                    <span class="ml-2 text-sm text-gray-700">Intermediate</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="skillLevel" value="expert" class="filter-checkbox" />
                                    <span class="ml-2 text-sm text-gray-700">Expert</span>
                                </label>
                            </div>
                        </div>

                        <!-- Posted Date Filter -->
                        <div>
                            <h3 class="font-medium text-gray-900 mb-3">Posted</h3>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="radio" name="posted" value="today" class="filter-radio" />
                                    <span class="ml-2 text-sm text-gray-700">Today</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="posted" value="week" class="filter-radio" checked />
                                    <span class="ml-2 text-sm text-gray-700">This Week</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="posted" value="month" class="filter-radio" />
                                    <span class="ml-2 text-sm text-gray-700">This Month</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Apply Filters Button -->
                    <button class="btn-primary w-full mt-6" onclick="applyFilters()">
                        Apply Filters
                    </button>
                </div>

                <!-- Job Alerts Card -->
                <div class="bg-gradient-to-br from-primary-50 to-secondary-50 rounded-lg p-6 mt-6">
                    <h3 class="font-semibold text-gray-900 mb-2">Job Alerts</h3>
                    <p class="text-gray-600 text-sm mb-4">Get notified when new jobs match your criteria</p>
                    <button class="btn-secondary w-full text-sm">
                        Create Alert
                    </button>
                </div>
            </aside>

            <!-- Jobs List -->
            <div class="flex-1">
                <!-- Results Header -->
                <div class="flex flex-col md:flex-row md:items-center justify-between mb-6">
                    <div>
                        <h1 class="text-fluid-2xl font-bold text-gray-900 mb-2">Available Jobs</h1>
                        <p class="text-gray-600">
                            <span id="jobCount">52</span> jobs found
                            <span class="hidden md:inline">• Updated 2 minutes ago</span>
                        </p>
                    </div>
                    
                    <!-- Sort Dropdown -->
                    <div class="flex items-center space-x-3 mt-4 md:mt-0">
                        <label class="text-sm text-gray-700">Sort by:</label>
                        <select class="form-input text-sm py-2" id="sortSelect" onchange="sortJobs()">
                            <option value="newest">Newest First</option>
                            <option value="budget-high">Highest Budget</option>
                            <option value="budget-low">Lowest Budget</option>
                            <option value="deadline">Deadline</option>
                            <option value="distance">Distance</option>
                        </select>
                    </div>
                </div>

                <!-- Jobs Container -->
                <div id="jobsContainer" class="space-y-4">
                    <!-- Job Card 1 -->
                    <div class="job-card bg-white rounded-lg shadow-craft p-6 hover:shadow-craft-lg transition-shadow duration-200" data-category="carpentry" data-budget="2000-5000" data-timeline="this-week" data-skill="intermediate">
                        <div class="flex items-start justify-between mb-4">
                            <div class="flex-1">
                                <div class="flex items-center space-x-3 mb-2">
                                    <h3 class="text-lg font-semibold text-gray-900 hover:text-primary cursor-pointer">
                                        Custom Kitchen Cabinets Installation
                                    </h3>
                                    <span class="bg-primary-100 text-primary-600 px-2 py-1 rounded-full text-xs font-medium">
                                        Carpentry
                                    </span>
                                </div>
                                <p class="text-gray-600 text-sm mb-3 line-clamp-2">
                                    Looking for experienced carpenter to install custom kitchen cabinets. High-quality materials provided. Need someone with attention to detail and experience with modern cabinet systems.
                                </p>
                                <div class="flex items-center space-x-6 text-sm text-gray-500">
                                    <div class="flex items-center space-x-1">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                                        </svg>
                                        <span>Brooklyn, NY • 2.3 miles</span>
                                    </div>
                                    <div class="flex items-center space-x-1">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                        <span>Posted 2 hours ago</span>
                                    </div>
                                    <div class="flex items-center space-x-1">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                                        </svg>
                                        <span>3 proposals</span>
                                    </div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-xl font-bold text-primary mb-1">$3,500 - $4,200</div>
                                <div class="text-sm text-gray-500">Fixed Price</div>
                                <div class="mt-2">
                                    <span class="bg-accent-100 text-accent-600 px-2 py-1 rounded-full text-xs font-medium">
                                        Start This Week
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between pt-4 border-t border-gray-200">
                            <div class="flex items-center space-x-3">
                                <img src="https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=400" alt="Client" class="w-8 h-8 rounded-full object-cover" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                                <div>
                                    <div class="text-sm font-medium text-gray-900">Sarah M.</div>
                                    <div class="flex items-center">
                                        <div class="flex">
                                            <svg class="w-3 h-3 text-accent" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                            </svg>
                                            <svg class="w-3 h-3 text-accent" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                            </svg>
                                            <svg class="w-3 h-3 text-accent" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                            </svg>
                                            <svg class="w-3 h-3 text-accent" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                            </svg>
                                            <svg class="w-3 h-3 text-accent" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                            </svg>
                                        </div>
                                        <span class="text-xs text-gray-500 ml-1">4.9 • 23 reviews</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-2">
                                <button class="job-action-btn" onclick="saveJob(this)" title="Save Job">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                                    </svg>
                                </button>
                                <button class="job-action-btn" onclick="shareJob(this)" title="Share Job">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"/>
                                    </svg>
                                </button>
                                <button class="btn-primary text-sm px-4 py-2" onclick="submitProposal(this)">
                                    Submit Proposal
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Job Card 2 -->
                    <div class="job-card bg-white rounded-lg shadow-craft p-6 hover:shadow-craft-lg transition-shadow duration-200" data-category="plumbing" data-budget="500-2000" data-timeline="asap" data-skill="expert">
                        <div class="flex items-start justify-between mb-4">
                            <div class="flex-1">
                                <div class="flex items-center space-x-3 mb-2">
                                    <h3 class="text-lg font-semibold text-gray-900 hover:text-primary cursor-pointer">
                                        Emergency Bathroom Pipe Repair
                                    </h3>
                                    <span class="bg-primary-100 text-primary-600 px-2 py-1 rounded-full text-xs font-medium">
                                        Plumbing
                                    </span>
                                    <span class="bg-error-100 text-error-600 px-2 py-1 rounded-full text-xs font-medium">
                                        URGENT
                                    </span>
                                </div>
                                <p class="text-gray-600 text-sm mb-3 line-clamp-2">
                                    Burst pipe in master bathroom causing water damage. Need immediate professional assistance. Licensed plumber required with emergency service availability.
                                </p>
                                <div class="flex items-center space-x-6 text-sm text-gray-500">
                                    <div class="flex items-center space-x-1">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                                        </svg>
                                        <span>Manhattan, NY • 4.7 miles</span>
                                    </div>
                                    <div class="flex items-center space-x-1">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                        <span>Posted 45 minutes ago</span>
                                    </div>
                                    <div class="flex items-center space-x-1">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                                        </svg>
                                        <span>1 proposal</span>
                                    </div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-xl font-bold text-primary mb-1">$800 - $1,200</div>
                                <div class="text-sm text-gray-500">Emergency Rate</div>
                                <div class="mt-2">
                                    <span class="bg-error-100 text-error-600 px-2 py-1 rounded-full text-xs font-medium">
                                        ASAP
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between pt-4 border-t border-gray-200">
                            <div class="flex items-center space-x-3">
                                <img src="https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=400" alt="Client" class="w-8 h-8 rounded-full object-cover" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                                <div>
                                    <div class="text-sm font-medium text-gray-900">Michael R.</div>
                                    <div class="flex items-center">
                                        <div class="flex">
                                            <svg class="w-3 h-3 text-accent" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                            </svg>
                                            <svg class="w-3 h-3 text-accent" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                            </svg>
                                            <svg class="w-3 h-3 text-accent" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                            </svg>
                                            <svg class="w-3 h-3 text-accent" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                            </svg>
                                            <svg class="w-3 h-3 text-gray-300" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                            </svg>
                                        </div>
                                        <span class="text-xs text-gray-500 ml-1">4.6 • 8 reviews</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-2">
                                <button class="job-action-btn" onclick="saveJob(this)" title="Save Job">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                                    </svg>
                                </button>
                                <button class="job-action-btn" onclick="shareJob(this)" title="Share Job">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"/>
                                    </svg>
                                </button>
                                <button class="btn-primary text-sm px-4 py-2" onclick="submitProposal(this)">
                                    Submit Proposal
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Job Card 3 -->
                    <div class="job-card bg-white rounded-lg shadow-craft p-6 hover:shadow-craft-lg transition-shadow duration-200" data-category="electrical" data-budget="under-500" data-timeline="flexible" data-skill="beginner">
                        <div class="flex items-start justify-between mb-4">
                            <div class="flex-1">
                                <div class="flex items-center space-x-3 mb-2">
                                    <h3 class="text-lg font-semibold text-gray-900 hover:text-primary cursor-pointer">
                                        Ceiling Fan Installation
                                    </h3>
                                    <span class="bg-primary-100 text-primary-600 px-2 py-1 rounded-full text-xs font-medium">
                                        Electrical
                                    </span>
                                </div>
                                <p class="text-gray-600 text-sm mb-3 line-clamp-2">
                                    Need a licensed electrician to install a ceiling fan in the living room. Existing wiring is in place. Simple installation, fan already purchased.
                                </p>
                                <div class="flex items-center space-x-6 text-sm text-gray-500">
                                    <div class="flex items-center space-x-1">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                                        </svg>
                                        <span>Queens, NY • 8.1 miles</span>
                                    </div>
                                    <div class="flex items-center space-x-1">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                        <span>Posted 1 day ago</span>
                                    </div>
                                    <div class="flex items-center space-x-1">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                                        </svg>
                                        <span>7 proposals</span>
                                    </div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-xl font-bold text-primary mb-1">$200 - $350</div>
                                <div class="text-sm text-gray-500">Fixed Price</div>
                                <div class="mt-2">
                                    <span class="bg-success-100 text-success-600 px-2 py-1 rounded-full text-xs font-medium">
                                        Flexible
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between pt-4 border-t border-gray-200">
                            <div class="flex items-center space-x-3">
                                <img src="https://images.pixabay.com/photo/2016/11/21/12/42/beard-1845166_1280.jpg" alt="Client" class="w-8 h-8 rounded-full object-cover" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                                <div>
                                    <div class="text-sm font-medium text-gray-900">David L.</div>
                                    <div class="flex items-center">
                                        <div class="flex">
                                            <svg class="w-3 h-3 text-accent" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                            </svg>
                                            <svg class="w-3 h-3 text-accent" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                            </svg>
                                            <svg class="w-3 h-3 text-accent" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                            </svg>
                                            <svg class="w-3 h-3 text-accent" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                            </svg>
                                            <svg class="w-3 h-3 text-accent" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                            </svg>
                                        </div>
                                        <span class="text-xs text-gray-500 ml-1">5.0 • 12 reviews</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-2">
                                <button class="job-action-btn" onclick="saveJob(this)" title="Save Job">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                                    </svg>
                                </button>
                                <button class="job-action-btn" onclick="shareJob(this)" title="Share Job">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"/>
                                    </svg>
                                </button>
                                <button class="btn-primary text-sm px-4 py-2" onclick="submitProposal(this)">
                                    Submit Proposal
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Load More Button -->
                    <div class="text-center py-8">
                        <button class="btn-outline" onclick="loadMoreJobs()">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                            </svg>
                            Load More Jobs
                        </button>
                    </div>
                </div>

                <!-- Map View (Initially Hidden) -->
                <div id="mapView" class="hidden bg-white rounded-lg shadow-craft p-4">
                    <div class="h-96 bg-gray-200 rounded-lg flex items-center justify-center">
                        <div class="text-center text-gray-500">
                            <svg class="w-16 h-16 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/>
                            </svg>
                            <p>Interactive map will be displayed here</p>
                            <p class="text-sm">Showing job locations within selected radius</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Mobile Bottom Navigation -->
    <nav class="lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-40">
        <div class="grid grid-cols-4 h-16">
            <a href="artisan_dashboard.html" class="flex flex-col items-center justify-center space-y-1 text-gray-400">
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                </svg>
                <span class="text-xs font-medium">Dashboard</span>
            </a>
            
            <a href="#" class="flex flex-col items-center justify-center space-y-1 text-primary">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
                <span class="text-xs font-medium">Browse</span>
            </a>
            
            <a href="#" class="flex flex-col items-center justify-center space-y-1 text-gray-400 relative">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                </svg>
                <span class="text-xs font-medium">Proposals</span>
            </a>
            
            <a href="user_profile.html" class="flex flex-col items-center justify-center space-y-1 text-gray-400">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                </svg>
                <span class="text-xs font-medium">Profile</span>
            </a>
        </div>
    </nav>

    <!-- Mobile Filters Toggle -->
    <div class="lg:hidden fixed bottom-20 left-4 z-40">
        <button class="bg-white text-gray-700 p-3 rounded-full shadow-craft-lg border border-gray-200 hover:bg-gray-50 transition-colors duration-200" onclick="toggleMobileFilters()">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/>
            </svg>
        </button>
    </div>

    <style>
        .view-toggle-btn {
            @apply p-2 rounded text-gray-500 hover:text-gray-700 transition-colors duration-200;
        }
        
        .view-toggle-btn.active {
            @apply bg-white text-primary shadow-sm;
        }

        .filter-checkbox, .filter-radio {
            @apply text-primary focus:ring-primary/20;
        }

        .job-action-btn {
            @apply p-2 text-gray-400 hover:text-primary transition-colors duration-200 rounded;
        }

        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .active-filter-tag {
            @apply bg-primary-100 text-primary-600 px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1;
        }
    </style>

    <script>
        let currentView = 'list';
        let isMapVisible = false;
        let currentFilters = {};

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
            initializeSearch();
            loadSavedFilters();
        });

        function initializeEventListeners() {
            // Search functionality
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', debounce(handleSearch, 300));
            }

            // Filter change listeners
            const filterInputs = document.querySelectorAll('.filter-checkbox, .filter-radio');
            filterInputs.forEach(input => {
                input.addEventListener('change', updateActiveFilters);
            });
        }

        function initializeSearch() {
            // Search with query parameters if present
            const urlParams = new URLSearchParams(window.location.search);
            const query = urlParams.get('q');
            if (query) {
                document.getElementById('searchInput').value = query;
                handleSearch({ target: { value: query } });
            }
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        function handleSearch(e) {
            const query = e.target.value.toLowerCase();
            const jobCards = document.querySelectorAll('.job-card');
            let visibleCount = 0;

            jobCards.forEach(card => {
                const title = card.querySelector('h3').textContent.toLowerCase();
                const description = card.querySelector('p').textContent.toLowerCase();
                const isVisible = title.includes(query) || description.includes(query);
                
                card.style.display = isVisible ? 'block' : 'none';
                if (isVisible) visibleCount++;
            });

            updateJobCount(visibleCount);
        }

        function toggleView(view) {
            currentView = view;
            const listBtn = document.getElementById('listViewBtn');
            const gridBtn = document.getElementById('gridViewBtn');
            const jobsContainer = document.getElementById('jobsContainer');

            if (view === 'list') {
                listBtn.classList.add('active');
                gridBtn.classList.remove('active');
                jobsContainer.classList.remove('grid', 'grid-cols-1', 'md:grid-cols-2');
                jobsContainer.classList.add('space-y-4');
            } else {
                listBtn.classList.remove('active');
                gridBtn.classList.add('active');
                jobsContainer.classList.remove('space-y-4');
                jobsContainer.classList.add('grid', 'grid-cols-1', 'md:grid-cols-2', 'gap-4');
            }
        }

        function toggleMap() {
            isMapVisible = !isMapVisible;
            const mapView = document.getElementById('mapView');
            const jobsContainer = document.getElementById('jobsContainer');
            const mapToggleBtn = document.getElementById('mapToggleBtn');

            if (isMapVisible) {
                mapView.classList.remove('hidden');
                jobsContainer.classList.add('hidden');
                mapToggleBtn.innerHTML = `
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"/>
                    </svg>
                    List View
                `;
            } else {
                mapView.classList.add('hidden');
                jobsContainer.classList.remove('hidden');
                mapToggleBtn.innerHTML = `
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/>
                    </svg>
                    Map View
                `;
            }
        }

        function updateActiveFilters() {
            const activeFilters = document.getElementById('activeFilters');
            const activeFiltersList = document.getElementById('activeFiltersList');
            const checkedFilters = document.querySelectorAll('.filter-checkbox:checked, .filter-radio:checked');
            
            activeFiltersList.innerHTML = '';
            
            if (checkedFilters.length > 0) {
                activeFilters.classList.remove('hidden');
                
                checkedFilters.forEach(filter => {
                    const filterType = filter.name;
                    const filterValue = filter.value;
                    const filterText = filter.parentElement.querySelector('span').textContent;
                    
                    const filterTag = document.createElement('div');
                    filterTag.className = 'active-filter-tag';
                    filterTag.innerHTML = `
                        <span>${filterText}</span>
                        <button onclick="removeFilter('${filterType}', '${filterValue}')" class="ml-1 hover:text-primary-800">
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                        </button>
                    `;
                    activeFiltersList.appendChild(filterTag);
                });
            } else {
                activeFilters.classList.add('hidden');
            }
        }

        function removeFilter(type, value) {
            const filter = document.querySelector(`input[name="${type}"][value="${value}"]`);
            if (filter) {
                filter.checked = false;
                updateActiveFilters();
                applyFilters();
            }
        }

        function clearFilters() {
            const allFilters = document.querySelectorAll('.filter-checkbox, .filter-radio');
            allFilters.forEach(filter => {
                if (filter.type === 'radio' && (filter.name === 'distance' || filter.name === 'posted')) {
                    // Keep default selections for radio buttons
                    if ((filter.name === 'distance' && filter.value === '10') ||
                        (filter.name === 'posted' && filter.value === 'week')) {
                        filter.checked = true;
                    } else {
                        filter.checked = false;
                    }
                } else {
                    filter.checked = false;
                }
            });
            
            updateActiveFilters();
            applyFilters();
        }

        function applyFilters() {
            const jobCards = document.querySelectorAll('.job-card');
            let visibleCount = 0;

            jobCards.forEach(card => {
                let isVisible = true;

                // Category filter
                const categoryFilters = document.querySelectorAll('input[name="category"]:checked');
                if (categoryFilters.length > 0) {
                    const cardCategory = card.dataset.category;
                    const categoryMatch = Array.from(categoryFilters).some(filter => filter.value === cardCategory);
                    isVisible = isVisible && categoryMatch;
                }

                // Budget filter
                const budgetFilters = document.querySelectorAll('input[name="budget"]:checked');
                if (budgetFilters.length > 0) {
                    const cardBudget = card.dataset.budget;
                    const budgetMatch = Array.from(budgetFilters).some(filter => filter.value === cardBudget);
                    isVisible = isVisible && budgetMatch;
                }

                // Timeline filter
                const timelineFilters = document.querySelectorAll('input[name="timeline"]:checked');
                if (timelineFilters.length > 0) {
                    const cardTimeline = card.dataset.timeline;
                    const timelineMatch = Array.from(timelineFilters).some(filter => filter.value === cardTimeline);
                    isVisible = isVisible && timelineMatch;
                }

                // Skill level filter
                const skillFilters = document.querySelectorAll('input[name="skillLevel"]:checked');
                if (skillFilters.length > 0) {
                    const cardSkill = card.dataset.skill;
                    const skillMatch = Array.from(skillFilters).some(filter => filter.value === cardSkill);
                    isVisible = isVisible && skillMatch;
                }

                card.style.display = isVisible ? 'block' : 'none';
                if (isVisible) visibleCount++;
            });

            updateJobCount(visibleCount);
            saveFilters();
        }

        function saveFilters() {
            const filters = {};
            const checkedFilters = document.querySelectorAll('.filter-checkbox:checked, .filter-radio:checked');
            
            checkedFilters.forEach(filter => {
                if (!filters[filter.name]) {
                    filters[filter.name] = [];
                }
                filters[filter.name].push(filter.value);
            });
            
            localStorage.setItem('jobFilters', JSON.stringify(filters));
        }

        function loadSavedFilters() {
            const savedFilters = localStorage.getItem('jobFilters');
            if (savedFilters) {
                const filters = JSON.parse(savedFilters);
                
                Object.keys(filters).forEach(filterType => {
                    filters[filterType].forEach(value => {
                        const filter = document.querySelector(`input[name="${filterType}"][value="${value}"]`);
                        if (filter) {
                            filter.checked = true;
                        }
                    });
                });
                
                updateActiveFilters();
                applyFilters();
            }
        }

        function updateJobCount(count) {
            document.getElementById('jobCount').textContent = count;
        }

        function sortJobs() {
            const sortValue = document.getElementById('sortSelect').value;
            const jobsContainer = document.getElementById('jobsContainer');
            const jobCards = Array.from(jobsContainer.querySelectorAll('.job-card'));
            
            jobCards.sort((a, b) => {
                switch (sortValue) {
                    case 'newest':
                        // Sort by posted time (would need data attributes in real implementation)
                        return 0;
                    case 'budget-high':
                        // Sort by budget amount (would need parsing in real implementation)
                        return 0;
                    case 'budget-low':
                        return 0;
                    case 'deadline':
                        return 0;
                    case 'distance':
                        return 0;
                    default:
                        return 0;
                }
            });
            
            // Re-append sorted cards
            jobCards.forEach(card => {
                jobsContainer.appendChild(card);
            });
        }

        function saveJob(button) {
            const jobCard = button.closest('.job-card');
            const jobTitle = jobCard.querySelector('h3').textContent;
            
            // Toggle saved state
            const isCurrentlySaved = button.classList.contains('text-primary');
            
            if (isCurrentlySaved) {
                button.classList.remove('text-primary');
                button.classList.add('text-gray-400');
                button.querySelector('svg').innerHTML = `
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                `;
                // Remove from saved jobs in localStorage
                removeSavedJob(jobTitle);
            } else {
                button.classList.remove('text-gray-400');
                button.classList.add('text-primary');
                button.querySelector('svg').innerHTML = `
                    <path d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"/>
                `;
                // Add to saved jobs in localStorage
                addSavedJob(jobTitle);
            }
        }

        function addSavedJob(jobTitle) {
            let savedJobs = JSON.parse(localStorage.getItem('savedJobs') || '[]');
            if (!savedJobs.includes(jobTitle)) {
                savedJobs.push(jobTitle);
                localStorage.setItem('savedJobs', JSON.stringify(savedJobs));
            }
        }

        function removeSavedJob(jobTitle) {
            let savedJobs = JSON.parse(localStorage.getItem('savedJobs') || '[]');
            savedJobs = savedJobs.filter(job => job !== jobTitle);
            localStorage.setItem('savedJobs', JSON.stringify(savedJobs));
        }

        function shareJob(button) {
            const jobCard = button.closest('.job-card');
            const jobTitle = jobCard.querySelector('h3').textContent;
            
            if (navigator.share) {
                navigator.share({
                    title: jobTitle,
                    text: 'Check out this job opportunity on Bricouli',
                    url: window.location.href
                });
            } else {
                // Fallback: copy to clipboard
                navigator.clipboard.writeText(window.location.href).then(() => {
                    alert('Job link copied to clipboard!');
                });
            }
        }

        function submitProposal(button) {
            const jobCard = button.closest('.job-card');
            const jobTitle = jobCard.querySelector('h3').textContent;
            
            // In a real application, this would navigate to a proposal form
            alert(`Opening proposal form for: ${jobTitle}`);
        }

        function loadMoreJobs() {
            // Simulate loading more jobs
            const loadButton = event.target.closest('button');
            const originalText = loadButton.innerHTML;
            
            loadButton.innerHTML = `
                <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-gray-600" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                Loading...
            `;
            loadButton.disabled = true;

            setTimeout(() => {
                loadButton.innerHTML = originalText;
                loadButton.disabled = false;
                // In real implementation, append new job cards here
            }, 1500);
        }

        function toggleMobileFilters() {
            // In a real implementation, this would show a mobile filter modal
            alert('Mobile filters modal would open here');
        }
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>